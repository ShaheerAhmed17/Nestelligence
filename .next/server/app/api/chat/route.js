"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_jarvis_Downloads_dream_home_finder_main_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/route.ts */ \"(rsc)/./app/api/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    resolvedPagePath: \"/home/jarvis/Downloads/dream-home-finder-main/app/api/chat/route.ts\",\n    nextConfigOutput,\n    userland: _home_jarvis_Downloads_dream_home_finder_main_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGamFydmlzJTJGRG93bmxvYWRzJTJGZHJlYW0taG9tZS1maW5kZXItbWFpbiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRmphcnZpcyUyRkRvd25sb2FkcyUyRmRyZWFtLWhvbWUtZmluZGVyLW1haW4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvPzJkYzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvamFydmlzL0Rvd25sb2Fkcy9kcmVhbS1ob21lLWZpbmRlci1tYWluL2FwcC9hcGkvY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9qYXJ2aXMvRG93bmxvYWRzL2RyZWFtLWhvbWUtZmluZGVyLW1haW4vYXBwL2FwaS9jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jaGF0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _huggingface_inference__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @huggingface/inference */ \"(rsc)/./node_modules/@huggingface/inference/dist/esm/index.js\");\n/* harmony import */ var _lib_vectorSearch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/vectorSearch */ \"(rsc)/./src/lib/vectorSearch.ts\");\n\n\n\nconst WEBSITE_CONTEXT = `\nABOUT Nestelligence:\nNestelligence is a premier real estate agency based in Karachi, Pakistan.\nWe specialize in buying, selling, and consultation for residential and commercial properties.\n\nCONTACT INFORMATION:\n- Phone: +92 311 1283440\n- Email: gettoknowshaheer798@gmail.com\n- Office Location: Karachi, Pakistan\n- Office Hours: Mon-Sat: 9:00 AM - 12:00 PM\n\nSERVICES:\n- Property Buying & Selling\n- Investment Consultation\n- Property Valuation\n- Legal Documentation Assistance\n`;\nasync function POST(req) {\n    try {\n        const { message } = await req.json();\n        if (!message) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message is required\"\n            }, {\n                status: 400\n            });\n        }\n        const client = new _huggingface_inference__WEBPACK_IMPORTED_MODULE_1__.InferenceClient(process.env.HUGGINGFACE_API_KEY);\n        // 1️⃣ Embed the user query for property search\n        const output = await client.featureExtraction({\n            model: \"sentence-transformers/all-MiniLM-L6-v2\",\n            inputs: message\n        });\n        // Handle potential array wrapping from the API\n        // For a single string input, it usually returns a 1D array (the vector).\n        // Safely cast or extract.\n        const queryEmbedding = Array.isArray(output) && Array.isArray(output[0]) ? output[0] : output;\n        // 2️⃣ Search top relevant properties\n        const topProperties = (0,_lib_vectorSearch__WEBPACK_IMPORTED_MODULE_2__.searchProperties)(queryEmbedding);\n        // 3️⃣ Build context string\n        const propertiesContext = topProperties.map((p)=>`- ${p.title} (${p.type}) in ${p.location}. Price: $${p.price.toLocaleString()}. ${p.bedrooms} bed, ${p.bathrooms} bath. ${p.description}`).join(\"\\n\");\n        const systemMessage = `\nYou are a helpful and professional real estate assistant for 'Nestelligence'.\nUse the following context to answer the user's question.\n\n${WEBSITE_CONTEXT}\n\nRELEVANT PROPERTIES FOUND:\n${propertiesContext || \"No specific properties found matching the query.\"}\n\nINSTRUCTIONS:\n- If the user asks about contact info, use the specific details provided.\n- If the user asks for properties, recommend the ones listed above.\n- Be polite and concise.\n`;\n        // 4️⃣ Chat Completion\n        // Note: We merge system prompt into user message because some inference providers \n        // on the free tier strictly enforce roles or don't support 'system'.\n        const completion = await client.chatCompletion({\n            model: \"meta-llama/Meta-Llama-3-8B-Instruct\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: systemMessage + \"\\n\\nUser Question: \" + message\n                }\n            ],\n            max_tokens: 500\n        });\n        const reply = completion.choices[0]?.message?.content ?? \"No reply.\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            reply\n        });\n    } catch (err) {\n        console.error(\"Chat API error:\", err);\n        // Safely log error details if they exist in different structures\n        if (err.body) console.error(\"Error body:\", JSON.stringify(err.body, null, 2));\n        if (err.response) console.error(\"Error response:\", JSON.stringify(await err.response.text(), null, 2));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch reply\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNDO0FBQ0g7QUFFdEQsTUFBTUcsa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQnpCLENBQUM7QUFFTSxlQUFlQyxLQUFLQyxHQUFnQjtJQUN2QyxJQUFJO1FBQ0EsTUFBTSxFQUFFQyxPQUFPLEVBQUUsR0FBRyxNQUFNRCxJQUFJRSxJQUFJO1FBRWxDLElBQUksQ0FBQ0QsU0FBUztZQUNWLE9BQU9OLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzdFO1FBRUEsTUFBTUMsU0FBUyxJQUFJVCxtRUFBZUEsQ0FBQ1UsUUFBUUMsR0FBRyxDQUFDQyxtQkFBbUI7UUFFbEUsK0NBQStDO1FBQy9DLE1BQU1DLFNBQVMsTUFBTUosT0FBT0ssaUJBQWlCLENBQUM7WUFDMUNDLE9BQU87WUFDUEMsUUFBUVg7UUFDWjtRQUVBLCtDQUErQztRQUMvQyx5RUFBeUU7UUFDekUsMEJBQTBCO1FBQzFCLE1BQU1ZLGlCQUFpQixNQUFPRSxPQUFPLENBQUNOLFdBQVdLLE1BQU1DLE9BQU8sQ0FBQ04sTUFBTSxDQUFDLEVBQUUsSUFDbEVBLE1BQU0sQ0FBQyxFQUFFLEdBQ1RBO1FBRU4scUNBQXFDO1FBQ3JDLE1BQU1PLGdCQUFnQm5CLG1FQUFnQkEsQ0FBQ2dCO1FBRXZDLDJCQUEyQjtRQUMzQixNQUFNSSxvQkFBb0JELGNBQWNFLEdBQUcsQ0FBQyxDQUFDQyxJQUN6QyxDQUFDLEVBQUUsRUFBRUEsRUFBRUMsS0FBSyxDQUFDLEVBQUUsRUFBRUQsRUFBRUUsSUFBSSxDQUFDLEtBQUssRUFBRUYsRUFBRUcsUUFBUSxDQUFDLFVBQVUsRUFBRUgsRUFBRUksS0FBSyxDQUFDQyxjQUFjLEdBQUcsRUFBRSxFQUFFTCxFQUFFTSxRQUFRLENBQUMsTUFBTSxFQUFFTixFQUFFTyxTQUFTLENBQUMsT0FBTyxFQUFFUCxFQUFFUSxXQUFXLENBQUMsQ0FBQyxFQUM1SUMsSUFBSSxDQUFDO1FBRVAsTUFBTUMsZ0JBQWdCLENBQUM7Ozs7QUFJL0IsRUFBRS9CLGdCQUFnQjs7O0FBR2xCLEVBQUVtQixxQkFBcUIsbURBQW1EOzs7Ozs7QUFNMUUsQ0FBQztRQUVPLHNCQUFzQjtRQUN0QixtRkFBbUY7UUFDbkYscUVBQXFFO1FBQ3JFLE1BQU1hLGFBQWEsTUFBTXpCLE9BQU8wQixjQUFjLENBQUM7WUFDM0NwQixPQUFPO1lBQ1BxQixVQUFVO2dCQUNOO29CQUFFQyxNQUFNO29CQUFRQyxTQUFTTCxnQkFBZ0Isd0JBQXdCNUI7Z0JBQVE7YUFDNUU7WUFDRGtDLFlBQVk7UUFDaEI7UUFFQSxNQUFNQyxRQUFRTixXQUFXTyxPQUFPLENBQUMsRUFBRSxFQUFFcEMsU0FBU2lDLFdBQVc7UUFFekQsT0FBT3ZDLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRWtDO1FBQU07SUFDckMsRUFBRSxPQUFPRSxLQUFVO1FBQ2ZDLFFBQVFwQyxLQUFLLENBQUMsbUJBQW1CbUM7UUFDakMsaUVBQWlFO1FBQ2pFLElBQUlBLElBQUlFLElBQUksRUFBRUQsUUFBUXBDLEtBQUssQ0FBQyxlQUFlc0MsS0FBS0MsU0FBUyxDQUFDSixJQUFJRSxJQUFJLEVBQUUsTUFBTTtRQUMxRSxJQUFJRixJQUFJSyxRQUFRLEVBQUVKLFFBQVFwQyxLQUFLLENBQUMsbUJBQW1Cc0MsS0FBS0MsU0FBUyxDQUFDLE1BQU1KLElBQUlLLFFBQVEsQ0FBQ0MsSUFBSSxJQUFJLE1BQU07UUFFbkcsT0FBT2pELHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUMvRTtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdml0ZV9yZWFjdF9zaGFkY25fdHMvLi9hcHAvYXBpL2NoYXQvcm91dGUudHM/ZGU0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBJbmZlcmVuY2VDbGllbnQgfSBmcm9tIFwiQGh1Z2dpbmdmYWNlL2luZmVyZW5jZVwiO1xuaW1wb3J0IHsgc2VhcmNoUHJvcGVydGllcyB9IGZyb20gXCJAL2xpYi92ZWN0b3JTZWFyY2hcIjtcblxuY29uc3QgV0VCU0lURV9DT05URVhUID0gYFxuQUJPVVQgTmVzdGVsbGlnZW5jZTpcbk5lc3RlbGxpZ2VuY2UgaXMgYSBwcmVtaWVyIHJlYWwgZXN0YXRlIGFnZW5jeSBiYXNlZCBpbiBLYXJhY2hpLCBQYWtpc3Rhbi5cbldlIHNwZWNpYWxpemUgaW4gYnV5aW5nLCBzZWxsaW5nLCBhbmQgY29uc3VsdGF0aW9uIGZvciByZXNpZGVudGlhbCBhbmQgY29tbWVyY2lhbCBwcm9wZXJ0aWVzLlxuXG5DT05UQUNUIElORk9STUFUSU9OOlxuLSBQaG9uZTogKzkyIDMxMSAxMjgzNDQwXG4tIEVtYWlsOiBnZXR0b2tub3dzaGFoZWVyNzk4QGdtYWlsLmNvbVxuLSBPZmZpY2UgTG9jYXRpb246IEthcmFjaGksIFBha2lzdGFuXG4tIE9mZmljZSBIb3VyczogTW9uLVNhdDogOTowMCBBTSAtIDEyOjAwIFBNXG5cblNFUlZJQ0VTOlxuLSBQcm9wZXJ0eSBCdXlpbmcgJiBTZWxsaW5nXG4tIEludmVzdG1lbnQgQ29uc3VsdGF0aW9uXG4tIFByb3BlcnR5IFZhbHVhdGlvblxuLSBMZWdhbCBEb2N1bWVudGF0aW9uIEFzc2lzdGFuY2VcbmA7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJNZXNzYWdlIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBJbmZlcmVuY2VDbGllbnQocHJvY2Vzcy5lbnYuSFVHR0lOR0ZBQ0VfQVBJX0tFWSEpO1xuXG4gICAgICAgIC8vIDHvuI/ig6MgRW1iZWQgdGhlIHVzZXIgcXVlcnkgZm9yIHByb3BlcnR5IHNlYXJjaFxuICAgICAgICBjb25zdCBvdXRwdXQgPSBhd2FpdCBjbGllbnQuZmVhdHVyZUV4dHJhY3Rpb24oe1xuICAgICAgICAgICAgbW9kZWw6IFwic2VudGVuY2UtdHJhbnNmb3JtZXJzL2FsbC1NaW5pTE0tTDYtdjJcIixcbiAgICAgICAgICAgIGlucHV0czogbWVzc2FnZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSGFuZGxlIHBvdGVudGlhbCBhcnJheSB3cmFwcGluZyBmcm9tIHRoZSBBUElcbiAgICAgICAgLy8gRm9yIGEgc2luZ2xlIHN0cmluZyBpbnB1dCwgaXQgdXN1YWxseSByZXR1cm5zIGEgMUQgYXJyYXkgKHRoZSB2ZWN0b3IpLlxuICAgICAgICAvLyBTYWZlbHkgY2FzdCBvciBleHRyYWN0LlxuICAgICAgICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IChBcnJheS5pc0FycmF5KG91dHB1dCkgJiYgQXJyYXkuaXNBcnJheShvdXRwdXRbMF0pKVxuICAgICAgICAgICAgPyBvdXRwdXRbMF1cbiAgICAgICAgICAgIDogb3V0cHV0O1xuXG4gICAgICAgIC8vIDLvuI/ig6MgU2VhcmNoIHRvcCByZWxldmFudCBwcm9wZXJ0aWVzXG4gICAgICAgIGNvbnN0IHRvcFByb3BlcnRpZXMgPSBzZWFyY2hQcm9wZXJ0aWVzKHF1ZXJ5RW1iZWRkaW5nIGFzIG51bWJlcltdKTtcblxuICAgICAgICAvLyAz77iP4oOjIEJ1aWxkIGNvbnRleHQgc3RyaW5nXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXNDb250ZXh0ID0gdG9wUHJvcGVydGllcy5tYXAoKHA6IGFueSkgPT5cbiAgICAgICAgICAgIGAtICR7cC50aXRsZX0gKCR7cC50eXBlfSkgaW4gJHtwLmxvY2F0aW9ufS4gUHJpY2U6ICQke3AucHJpY2UudG9Mb2NhbGVTdHJpbmcoKX0uICR7cC5iZWRyb29tc30gYmVkLCAke3AuYmF0aHJvb21zfSBiYXRoLiAke3AuZGVzY3JpcHRpb259YFxuICAgICAgICApLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZSA9IGBcbllvdSBhcmUgYSBoZWxwZnVsIGFuZCBwcm9mZXNzaW9uYWwgcmVhbCBlc3RhdGUgYXNzaXN0YW50IGZvciAnTmVzdGVsbGlnZW5jZScuXG5Vc2UgdGhlIGZvbGxvd2luZyBjb250ZXh0IHRvIGFuc3dlciB0aGUgdXNlcidzIHF1ZXN0aW9uLlxuXG4ke1dFQlNJVEVfQ09OVEVYVH1cblxuUkVMRVZBTlQgUFJPUEVSVElFUyBGT1VORDpcbiR7cHJvcGVydGllc0NvbnRleHQgfHwgXCJObyBzcGVjaWZpYyBwcm9wZXJ0aWVzIGZvdW5kIG1hdGNoaW5nIHRoZSBxdWVyeS5cIn1cblxuSU5TVFJVQ1RJT05TOlxuLSBJZiB0aGUgdXNlciBhc2tzIGFib3V0IGNvbnRhY3QgaW5mbywgdXNlIHRoZSBzcGVjaWZpYyBkZXRhaWxzIHByb3ZpZGVkLlxuLSBJZiB0aGUgdXNlciBhc2tzIGZvciBwcm9wZXJ0aWVzLCByZWNvbW1lbmQgdGhlIG9uZXMgbGlzdGVkIGFib3ZlLlxuLSBCZSBwb2xpdGUgYW5kIGNvbmNpc2UuXG5gO1xuXG4gICAgICAgIC8vIDTvuI/ig6MgQ2hhdCBDb21wbGV0aW9uXG4gICAgICAgIC8vIE5vdGU6IFdlIG1lcmdlIHN5c3RlbSBwcm9tcHQgaW50byB1c2VyIG1lc3NhZ2UgYmVjYXVzZSBzb21lIGluZmVyZW5jZSBwcm92aWRlcnMgXG4gICAgICAgIC8vIG9uIHRoZSBmcmVlIHRpZXIgc3RyaWN0bHkgZW5mb3JjZSByb2xlcyBvciBkb24ndCBzdXBwb3J0ICdzeXN0ZW0nLlxuICAgICAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXRDb21wbGV0aW9uKHtcbiAgICAgICAgICAgIG1vZGVsOiBcIm1ldGEtbGxhbWEvTWV0YS1MbGFtYS0zLThCLUluc3RydWN0XCIsXG4gICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHN5c3RlbU1lc3NhZ2UgKyBcIlxcblxcblVzZXIgUXVlc3Rpb246IFwiICsgbWVzc2FnZSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IDUwMCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVwbHkgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgPz8gXCJObyByZXBseS5cIjtcblxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyByZXBseSB9KTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2hhdCBBUEkgZXJyb3I6XCIsIGVycik7XG4gICAgICAgIC8vIFNhZmVseSBsb2cgZXJyb3IgZGV0YWlscyBpZiB0aGV5IGV4aXN0IGluIGRpZmZlcmVudCBzdHJ1Y3R1cmVzXG4gICAgICAgIGlmIChlcnIuYm9keSkgY29uc29sZS5lcnJvcihcIkVycm9yIGJvZHk6XCIsIEpTT04uc3RyaW5naWZ5KGVyci5ib2R5LCBudWxsLCAyKSk7XG4gICAgICAgIGlmIChlcnIucmVzcG9uc2UpIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZXNwb25zZTpcIiwgSlNPTi5zdHJpbmdpZnkoYXdhaXQgZXJyLnJlc3BvbnNlLnRleHQoKSwgbnVsbCwgMikpO1xuXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCByZXBseVwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkluZmVyZW5jZUNsaWVudCIsInNlYXJjaFByb3BlcnRpZXMiLCJXRUJTSVRFX0NPTlRFWFQiLCJQT1NUIiwicmVxIiwibWVzc2FnZSIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJIVUdHSU5HRkFDRV9BUElfS0VZIiwib3V0cHV0IiwiZmVhdHVyZUV4dHJhY3Rpb24iLCJtb2RlbCIsImlucHV0cyIsInF1ZXJ5RW1iZWRkaW5nIiwiQXJyYXkiLCJpc0FycmF5IiwidG9wUHJvcGVydGllcyIsInByb3BlcnRpZXNDb250ZXh0IiwibWFwIiwicCIsInRpdGxlIiwidHlwZSIsImxvY2F0aW9uIiwicHJpY2UiLCJ0b0xvY2FsZVN0cmluZyIsImJlZHJvb21zIiwiYmF0aHJvb21zIiwiZGVzY3JpcHRpb24iLCJqb2luIiwic3lzdGVtTWVzc2FnZSIsImNvbXBsZXRpb24iLCJjaGF0Q29tcGxldGlvbiIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwicmVwbHkiLCJjaG9pY2VzIiwiZXJyIiwiY29uc29sZSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2UiLCJ0ZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/vectorSearch.ts":
/*!*********************************!*\
  !*** ./src/lib/vectorSearch.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   searchProperties: () => (/* binding */ searchProperties)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction cosineSimilarity(a, b) {\n    const dotProduct = a.reduce((sum, val, i)=>sum + val * b[i], 0);\n    const magnitudeA = Math.sqrt(a.reduce((sum, val)=>sum + val * val, 0));\n    const magnitudeB = Math.sqrt(b.reduce((sum, val)=>sum + val * val, 0));\n    return dotProduct / (magnitudeA * magnitudeB);\n}\nconst properties = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(\"data/properties_emb.json\", \"utf-8\"));\nfunction searchProperties(queryEmbedding, topK = 3) {\n    const results = properties.map((p)=>({\n            ...p,\n            score: cosineSimilarity(queryEmbedding, p.embedding)\n        })).sort((a, b)=>b.score - a.score).slice(0, topK);\n    return results;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ZlY3RvclNlYXJjaC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0I7QUFFcEIsU0FBU0MsaUJBQWlCQyxDQUFXLEVBQUVDLENBQVc7SUFDOUMsTUFBTUMsYUFBYUYsRUFBRUcsTUFBTSxDQUFDLENBQUNDLEtBQUtDLEtBQUtDLElBQU1GLE1BQU1DLE1BQU1KLENBQUMsQ0FBQ0ssRUFBRSxFQUFFO0lBQy9ELE1BQU1DLGFBQWFDLEtBQUtDLElBQUksQ0FBQ1QsRUFBRUcsTUFBTSxDQUFDLENBQUNDLEtBQUtDLE1BQVFELE1BQU1DLE1BQU1BLEtBQUs7SUFDckUsTUFBTUssYUFBYUYsS0FBS0MsSUFBSSxDQUFDUixFQUFFRSxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsTUFBUUQsTUFBTUMsTUFBTUEsS0FBSztJQUNyRSxPQUFPSCxhQUFjSyxDQUFBQSxhQUFhRyxVQUFTO0FBQy9DO0FBR0EsTUFBTUMsYUFBYUMsS0FBS0MsS0FBSyxDQUFDZixzREFBZSxDQUFDLDRCQUE0QjtBQUVuRSxTQUFTaUIsaUJBQWlCQyxjQUF3QixFQUFFQyxPQUFPLENBQUM7SUFDL0QsTUFBTUMsVUFBVVAsV0FDWFEsR0FBRyxDQUFDLENBQUNDLElBQVk7WUFDZCxHQUFHQSxDQUFDO1lBQ0pDLE9BQU90QixpQkFBaUJpQixnQkFBZ0JJLEVBQUVFLFNBQVM7UUFDdkQsSUFDQ0MsSUFBSSxDQUFDLENBQUN2QixHQUFRQyxJQUFXQSxFQUFFb0IsS0FBSyxHQUFHckIsRUFBRXFCLEtBQUssRUFDMUNHLEtBQUssQ0FBQyxHQUFHUDtJQUVkLE9BQU9DO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aXRlX3JlYWN0X3NoYWRjbl90cy8uL3NyYy9saWIvdmVjdG9yU2VhcmNoLnRzPzJkMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuXG5mdW5jdGlvbiBjb3NpbmVTaW1pbGFyaXR5KGE6IG51bWJlcltdLCBiOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgY29uc3QgZG90UHJvZHVjdCA9IGEucmVkdWNlKChzdW0sIHZhbCwgaSkgPT4gc3VtICsgdmFsICogYltpXSwgMCk7XG4gICAgY29uc3QgbWFnbml0dWRlQSA9IE1hdGguc3FydChhLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCAqIHZhbCwgMCkpO1xuICAgIGNvbnN0IG1hZ25pdHVkZUIgPSBNYXRoLnNxcnQoYi5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwgKiB2YWwsIDApKTtcbiAgICByZXR1cm4gZG90UHJvZHVjdCAvIChtYWduaXR1ZGVBICogbWFnbml0dWRlQik7XG59XG5cblxuY29uc3QgcHJvcGVydGllcyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKFwiZGF0YS9wcm9wZXJ0aWVzX2VtYi5qc29uXCIsIFwidXRmLThcIikpO1xuXG5leHBvcnQgZnVuY3Rpb24gc2VhcmNoUHJvcGVydGllcyhxdWVyeUVtYmVkZGluZzogbnVtYmVyW10sIHRvcEsgPSAzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IHByb3BlcnRpZXNcbiAgICAgICAgLm1hcCgocDogYW55KSA9PiAoe1xuICAgICAgICAgICAgLi4ucCxcbiAgICAgICAgICAgIHNjb3JlOiBjb3NpbmVTaW1pbGFyaXR5KHF1ZXJ5RW1iZWRkaW5nLCBwLmVtYmVkZGluZyksXG4gICAgICAgIH0pKVxuICAgICAgICAuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgICAgICAuc2xpY2UoMCwgdG9wSyk7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cbiJdLCJuYW1lcyI6WyJmcyIsImNvc2luZVNpbWlsYXJpdHkiLCJhIiwiYiIsImRvdFByb2R1Y3QiLCJyZWR1Y2UiLCJzdW0iLCJ2YWwiLCJpIiwibWFnbml0dWRlQSIsIk1hdGgiLCJzcXJ0IiwibWFnbml0dWRlQiIsInByb3BlcnRpZXMiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJzZWFyY2hQcm9wZXJ0aWVzIiwicXVlcnlFbWJlZGRpbmciLCJ0b3BLIiwicmVzdWx0cyIsIm1hcCIsInAiLCJzY29yZSIsImVtYmVkZGluZyIsInNvcnQiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/vectorSearch.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@huggingface"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjarvis%2FDownloads%2Fdream-home-finder-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();